{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/ben/Repos/Integradora-HonorTech/RestaurantExpo/app/screens/Comentarios/Comentarios.js\";\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { useFocusEffect } from \"@react-navigation/native\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { Icon } from \"react-native-elements\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport ListarComentarios from \"../../components/Comentarios/ListarComentarios\";\nimport { firebaseApp } from \"../../utils/firebase\";\nimport firebase from 'firebase/app';\nimport \"firebase/firestore\";\nvar db = firebase.firestore(firebaseApp);\nexport default function Comentarios() {\n  var navegacion = useNavigation();\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      usuario = _useState2[0],\n      setUsuario = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      puntero = _useState4[0],\n      setPuntero = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      comentario = _useState6[0],\n      setComentario = _useState6[1];\n\n  useEffect(function () {\n    firebase.auth().onAuthStateChanged(function (userInfo) {\n      setUsuario(userInfo);\n    });\n  }, []);\n  useFocusEffect(useCallback(function () {\n    var arrComentario = [];\n    db.collection(\"comments\").orderBy(\"fecha\", \"desc\").limit(10).get().then(function (res) {\n      setPuntero(res.docs[res.docs.length - 1]);\n      res.forEach(function (doc) {\n        var comentario = doc.data();\n        comentario.id = doc.id;\n        arrComentario.push(comentario);\n      });\n      setComentario(arrComentario);\n    });\n  }, []));\n  return React.createElement(View, {\n    style: styles.vista,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }\n  }, React.createElement(ListarComentarios, {\n    comentarios: comentario,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }), usuario && React.createElement(Icon, {\n    reverse: true,\n    type: \"material_community\",\n    name: \"add\",\n    color: \"#0A6ED3\",\n    containerStyle: styles.btn,\n    onPress: function onPress() {\n      return navegacion.navigate(\"Agregar Comentarios\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }));\n}\nvar styles = StyleSheet.create({\n  vista: {\n    flex: 1,\n    backgroundColor: \"#FFFF\"\n  },\n  btn: {\n    position: \"absolute\",\n    bottom: 10,\n    right: 10,\n    shadowColor: \"black\",\n    shadowOffset: {\n      width: 2,\n      height: 2\n    },\n    shadowOpacity: 0.5\n  },\n  ctnComentario: {\n    width: \"100%\"\n  },\n  titComentario: {\n    fontWeight: \"bold\",\n    marginTop: 10,\n    marginBottom: 10,\n    color: \"#000033\"\n  },\n  ctnDescripcion: {\n    width: \"100%\",\n    alignItems: 'center'\n  },\n  Descripcion: {\n    width: \"90%\",\n    textAlign: \"center\"\n  },\n  Fecha: {\n    alignItems: 'flex-end',\n    marginTop: 10,\n    marginBottom: 10\n  }\n});","map":{"version":3,"sources":["/home/ben/Repos/Integradora-HonorTech/RestaurantExpo/app/screens/Comentarios/Comentarios.js"],"names":["React","useState","useEffect","useCallback","useFocusEffect","Icon","useNavigation","ListarComentarios","firebaseApp","firebase","db","firestore","Comentarios","navegacion","usuario","setUsuario","puntero","setPuntero","comentario","setComentario","auth","onAuthStateChanged","userInfo","arrComentario","collection","orderBy","limit","get","then","res","docs","length","forEach","doc","data","id","push","styles","vista","btn","navigate","StyleSheet","create","flex","backgroundColor","position","bottom","right","shadowColor","shadowOffset","width","height","shadowOpacity","ctnComentario","titComentario","fontWeight","marginTop","marginBottom","color","ctnDescripcion","alignItems","Descripcion","textAlign","Fecha"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useCallback}  from \"react\";\r\nimport { useFocusEffect } from \"@react-navigation/native\";\r\nimport { View, Text, StyleSheet } from \"react-native\";\r\nimport { Icon } from \"react-native-elements\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport ListarComentarios from \"../../components/Comentarios/ListarComentarios\";\r\n\r\n\r\nimport {firebaseApp} from \"../../utils/firebase\"; \r\nimport firebase from 'firebase/app'; \r\nimport \"firebase/firestore\";\r\n\r\nconst db = firebase.firestore(firebaseApp); \r\n\r\nexport default function Comentarios() {\r\n\r\n  const navegacion = useNavigation();\r\n  //State para el Usuario\r\n  const [usuario, setUsuario]=useState(null); \r\n  //State para el puntero\r\n  const [puntero, setPuntero]=useState(null);\r\n\r\n  const [comentario, setComentario]=useState([]); \r\n\r\n  //definimos el acceso a las rutas de sucursales\r\n  \r\n    //validamos sesión existente \r\n    useEffect(()=>{ \r\n      firebase.auth().onAuthStateChanged((userInfo)=>{ \r\n      //si existe una sesión activa asignamos los datos de sesión al useState usuario \r\n          setUsuario(userInfo); \r\n      }); \r\n  },[]); \r\n\r\n  useFocusEffect( \r\n    useCallback(()=>{ \r\n         /*accedemos a la colección de sucursales, consultamos los registros \r\n      con get y atrapamos la respuesta (se retorna una promesa con la lista sucursales) \r\n      contamos y asignamos el total de sucursales al useState totalSuc*/ \r\n     /*  db.collection(\"comments\") \r\n      .get() \r\n      .then((res)=>{ \r\n          setTotalSuc(res.size); \r\n          \r\n      });  */\r\n\r\n      const arrComentario=[]; \r\n      db.collection(\"comments\").orderBy(\"fecha\",\"desc\").limit(10).get() \r\n          .then((res)=>{ \r\n            setPuntero(res.docs[res.docs.length -1]); \r\n            res.forEach((doc)=>{ \r\n              //extraemos cada documento y lo almacenamos en un objeto sucursal \r\n              const comentario =doc.data(); \r\n              //la clave del comentario no asigna a menos que lo indiquemos \r\n              comentario.id =doc.id; \r\n              //almacenamos cada sucursal en un arreglo. \r\n              arrComentario.push(comentario); \r\n          }); \r\n           //Al terminar de recuperar todos los documentos los almacenamos en el useState sucursales \r\n           setComentario(arrComentario); \r\n          \r\n          });\r\n      },[]) \r\n    );\r\n\r\n\r\n  return (\r\n    <View style={styles.vista}>\r\n      {/*Colocaremos un botón de agregar nueva sucursal*/}\r\n      <ListarComentarios comentarios={comentario}/>\r\n      {usuario && ( \r\n      <Icon\r\n        reverse\r\n        type=\"material_community\"\r\n        name=\"add\"\r\n        color=\"#0A6ED3\"\r\n        containerStyle={styles.btn}\r\n        //Vinculamos el envió a la ruta agregar-suc\r\n        onPress={() => navegacion.navigate(\"Agregar Comentarios\")}\r\n      />\r\n      )}\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  vista: {\r\n    flex: 1,\r\n    backgroundColor: \"#FFFF\",\r\n  },\r\n  btn: {\r\n    position: \"absolute\",\r\n    bottom: 10,\r\n    right: 10,\r\n    //Para IOS mostrará una sombra para el botón\r\n    shadowColor: \"black\",\r\n    shadowOffset: { width: 2, height: 2 },\r\n    shadowOpacity: 0.5,\r\n  },\r\n\r\n\r\n  ctnComentario:{\r\n    width:\"100%\",\r\n  },\r\n\r\n  titComentario:{\r\n    fontWeight: \"bold\",\r\n    marginTop: 10,\r\n    marginBottom: 10,\r\n    color: \"#000033\"\r\n  },\r\n\r\n  ctnDescripcion:{\r\n    width: \"100%\",\r\n    alignItems: 'center',\r\n    \r\n  }\r\n,\r\nDescripcion:{\r\n  width: \"90%\",\r\n  textAlign: \"center\"\r\n}\r\n,\r\nFecha:{\r\n  alignItems:'flex-end',\r\n  marginTop: 10,\r\n  marginBottom: 10,\r\n}\r\n \r\n});\r\n\r\n"]},"metadata":{},"sourceType":"module"}